<!DOCTYPE html>
<html>
  <head>
    <title>Play!</title>
    <%= javascript_include_tag 'i18n' %>
    <%= javascript_include_tag 'translations' %>
    <%= load_global8ball_game %>
    <script type="text/javascript">
      function loadGame() {
        var config = <%= raw @game.config %>;

        var current_viewer_select = document.getElementById('current_viewer');
        var current_viewer = JSON.parse(current_viewer_select.options[current_viewer_select.selectedIndex].value);
        config['current_viewer'] = current_viewer;

        var current_stage_select = document.getElementById('current_stage');
        var current_stage = current_stage_select.options[current_stage_select.selectedIndex].value;

        document.getElementById('menu_top').style.display = 'none';
        document.getElementById('menu_right').style.display = 'inline';

        var game = window.initGlobal8Ball(config);

        // console.log(game);
      };
    </script>
    <style type="text/css">
      html {
        font: bold 24px Arial;
      }
      .button {
        text-decoration: none;
        background-color: #EEEEEE;
        color: #333333;
        padding: 2px 6px 2px 6px;
        border-top: 1px solid #CCCCCC;
        border-right: 1px solid #333333;
        border-bottom: 1px solid #333333;
        border-left: 1px solid #CCCCCC;
      }
      .menu select {
      }
      .menu_right {
        float: right;
      }
      #da-game {
        height:105vh;
        width:140vh;
      }
    </style>
  </head>
  <body>
    <div id="menu_top" class="menu">
      <p>Select the current viewer: <%= current_viewer_select %></p>
      <p>Select the current stage: <%= current_stage_select%></p>
      <a href="#" id="lets_play" class="button" onclick="loadGame();">Let's play</a>
    </div>
    <div id="menu_right" class="menu menu_right" style="display: none;">
      <a href="#" id="reload" class="button" onclick="window.location = '/';">Reload</a>
    </div>
    <div id="da-game"></div>
  </body>
</html>
